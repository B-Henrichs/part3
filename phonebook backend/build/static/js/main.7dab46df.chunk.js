(this.webpackJsonpphoneBook=this.webpackJsonpphoneBook||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t(15),a=t.n(c),u=(t(21),t(6)),i=t(3),s=function(e){var n=e.addPerson,t=e.newName,o=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:o})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"update phonebook"})})]})},l=function(e){var n=e.person,t=e.removeEntry;return Object(r.jsxs)("li",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:t,value:n.id,children:"Delete"})," "]})},d=function(e){return Object(r.jsxs)("div",{children:["search:",Object(r.jsx)("input",{value:e.newSearch,onChange:e.handleSearchChange})]})},h=function(e){var n=e.Person,t=e.personsToShow,o=e.removeEntry;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsx)(n,{person:e,removeEntry:o},e.name)}))})]})},b=t(4),j=t.n(b),f="/api/persons",m={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},removeEntry:function(e){var n=j.a.delete("".concat(f,"/").concat(e));return(console.log("persons is",e),n).then((function(e){return e.data}))}},O={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},v=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{style:O,className:"error",children:n})},g={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},p=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{style:g,className:"error",children:n})},x=function(){var e=Object(o.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),b=Object(i.a)(a,2),j=b[0],f=b[1],O=Object(o.useState)(""),g=Object(i.a)(O,2),x=g[0],w=g[1],y=Object(o.useState)(""),S=Object(i.a)(y,2),C=S[0],k=S[1],N=Object(o.useState)(null),E=Object(i.a)(N,2),T=E[0],P=E[1],B=Object(o.useState)(null),D=Object(i.a)(B,2),L=D[0],A=D[1];Object(o.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]);var z=t.filter((function(e){return!0===e.name.toLowerCase().includes(C)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(p,{message:L}),Object(r.jsx)(v,{message:T}),Object(r.jsx)("h3",{children:"Search"}),Object(r.jsx)(d,{newSearch:C,handleSearchChange:function(e){k(e.target.value)}}),Object(r.jsx)("h3",{children:"Update Phonebook"}),Object(r.jsx)(s,{addPerson:function(e){e.preventDefault(),t.filter((function(e){return e.name.toLocaleLowerCase()===j.toLowerCase()})).length?function(){var e=window.confirm("".concat(j," is already added to phonebook, replace the old phone number with new one.")),n=t.find((function(e){return e.name===j})),r=Object(u.a)(Object(u.a)({},n),{},{number:x});e&&m.update(r.id,r).then((function(e){P("Updated ".concat(r.name,"'s entry")),setTimeout((function(){P(null)}),5e3),c(t.map((function(n){return n.id===e.id?e:n})))})).catch((function(e){A("'".concat(r.name,"' was removed by another user")),setTimeout((function(){A(null)}),5e3),c(t.filter((function(e){return e.id!==r.id})))}))}():function(){var e={name:j,number:x};m.create(e).then((function(e){P("Added ".concat(e.name," to the server")),setTimeout((function(){P(null)}),5e3),c(t.concat(e)),f(""),w("")}))}(),f(""),w("")},newName:j,handleNameChange:function(e){f(e.target.value)},newNumber:x,handleNumberChange:function(e){w(e.target.value)}}),Object(r.jsx)(h,{personsToShow:z,Person:l,removeEntry:function(e){e.preventDefault();var n=e.target.value,r=window.confirm("are you sure?"),o=t.find((function(e){return e.id===n}));r&&m.removeEntry(o.id).then((function(e){console.log(o.name),P("Deleted ".concat(o.name,"'s entry")),setTimeout((function(){P(null)}),5e3),c(t.filter((function(e){return e.id!==n})))})).catch((function(e){A("'".concat(t[n-1].name,"' was removed by another user")),setTimeout((function(){A(null)}),5e3),c(t.filter((function(e){return e.id!==t[n-1].id})))}))}})]})};a.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.7dab46df.chunk.js.map